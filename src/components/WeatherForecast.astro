---
/**
 * WeatherForecast.astro
 *
 * Purpose: Display weather information for trip destinations with links to live forecasts.
 *
 * Features:
 * - Links to live weather forecasts (no fake data)
 * - Historical averages for trip planning
 * - Packing tips based on typical conditions
 * - Links to both Chennai and Bangalore forecasts
 */

interface WeatherDestination {
  name: string;
  weatherUrl: string;
  dates: string;
}

const destinations: WeatherDestination[] = [
  {
    name: "Chennai",
    weatherUrl: "https://weather.com/weather/tenday/l/Chennai+Tamil+Nadu+India?canonicalCityId=aefa7f87c31e7e7e3e4ea4beb23b4504",
    dates: "Jan 21 - Feb 1"
  },
  {
    name: "Bangalore",
    weatherUrl: "https://weather.com/weather/tenday/l/Bangalore+Karnataka+India?canonicalCityId=5c8ec31db5f5a6e77ffc4db0a6f27efc",
    dates: "Feb 1 - Feb 4"
  }
];
---

<div class="weather-card">
  <div class="weather-header">
    <h3 class="weather-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
      </svg>
      Weather Forecasts
    </h3>
    <span class="weather-note">Click for live conditions</span>
  </div>

  <!-- Live Weather Links -->
  <div class="weather-links">
    {destinations.map((dest) => (
      <a href={dest.weatherUrl} target="_blank" rel="noopener" class="weather-link">
        <div class="link-content">
          <span class="dest-name">{dest.name}</span>
          <span class="dest-dates">{dest.dates}</span>
        </div>
        <div class="link-arrow">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
        </div>
      </a>
    ))}
  </div>

  <!-- Historical Averages -->
  <div class="weather-summary">
    <h4 class="summary-title">Typical Late January Conditions</h4>
    <div class="summary-grid">
      <div class="summary-item">
        <span class="summary-label">Average High</span>
        <span class="summary-value">31째C <span class="fahrenheit">(88째F)</span></span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Average Low</span>
        <span class="summary-value">22째C <span class="fahrenheit">(72째F)</span></span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Humidity</span>
        <span class="summary-value">65-75%</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Rain Chance</span>
        <span class="summary-value">Low (dry season)</span>
      </div>
    </div>
  </div>

  <!-- Packing Tips -->
  <div class="packing-tips">
    <h4 class="tips-title">Packing Tips for Chennai Weather</h4>
    <ul class="tips-list">
      <li>Light, breathable cotton clothing</li>
      <li>Sunscreen and sunglasses essential</li>
      <li>Light jacket for AC venues (malls, hotels)</li>
      <li>Comfortable walking shoes for shopping</li>
      <li>Umbrella just in case</li>
      <li>Insect repellent for evening outdoor events</li>
    </ul>
  </div>
</div>

<style>
  .weather-card {
    background-color: var(--color-bg-card);
    border-radius: var(--radius-card);
    border: 1px solid var(--color-border);
    overflow: hidden;
  }

  .weather-header {
    padding: var(--spacing-4);
    background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
    color: white;
  }

  .weather-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    margin: 0 0 var(--spacing-1) 0;
  }

  .weather-note {
    font-size: var(--font-size-sm);
    opacity: 0.9;
  }

  /* Weather Links */
  .weather-links {
    padding: var(--spacing-4);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
    border-bottom: 1px solid var(--color-border);
  }

  .weather-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-3) var(--spacing-4);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-button);
    text-decoration: none;
    border: 1px solid var(--color-border);
    transition: all 0.2s ease;
  }

  .weather-link:hover {
    background: var(--color-gold-50);
    border-color: var(--color-gold-300);
    transform: translateX(4px);
  }

  .link-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .dest-name {
    font-weight: var(--font-weight-semibold);
    color: var(--color-earth-800);
  }

  .dest-dates {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
  }

  .link-arrow {
    color: var(--color-gold-600);
  }

  /* Summary Section */
  .weather-summary {
    padding: var(--spacing-4);
    background-color: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-border);
  }

  .summary-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-earth-700);
    margin: 0 0 var(--spacing-3) 0;
    text-align: center;
  }

  .summary-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-3);
  }

  @media (min-width: 640px) {
    .summary-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .summary-item {
    text-align: center;
  }

  .summary-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-1);
  }

  .summary-value {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-earth-900);
  }

  .fahrenheit {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-normal);
    color: var(--color-text-secondary);
  }

  /* Packing Tips */
  .packing-tips {
    padding: var(--spacing-4);
    background-color: var(--color-bg-tertiary);
  }

  .tips-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-earth-900);
    margin: 0 0 var(--spacing-2) 0;
  }

  .tips-list {
    margin: 0;
    padding-left: var(--spacing-4);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  .tips-list li {
    margin-bottom: var(--spacing-1);
  }

  .tips-list li:last-child {
    margin-bottom: 0;
  }
</style>
