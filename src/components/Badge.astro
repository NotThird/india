---
/**
 * Badge.astro
 *
 * Purpose: Versatile badge component for event types and status indicators.
 *
 * Badge Categories:
 * 1. Event Type Badges:
 *    - pre-wedding: Orange tones (Mehendi, etc.)
 *    - ceremony: Gold tones (Wedding ceremony)
 *    - reception: Earth tones (Cocktail parties, lunches)
 *    - post-wedding: Muted earth (Farewell events)
 *
 * 2. Status Badges:
 *    - granted/confirmed: Green (Visa granted, booking confirmed)
 *    - considering/pending: Orange/warning (Under consideration)
 *    - tbc: Muted gray (To be confirmed)
 *    - info: Blue (Informational)
 *
 * Props:
 * - variant: The badge style variant (required)
 * - size: Badge size - 'sm' or 'md' (default: 'sm')
 * - class: Additional CSS classes (optional)
 */

type BadgeVariant =
  | "pre-wedding"
  | "ceremony"
  | "reception"
  | "post-wedding"
  | "granted"
  | "confirmed"
  | "considering"
  | "pending"
  | "tbc"
  | "info"
  | "default";

type BadgeSize = "sm" | "md";

interface Props {
  variant: BadgeVariant;
  size?: BadgeSize;
  class?: string;
}

const { variant, size = "sm", class: className = "" } = Astro.props;

/**
 * Maps variant names to CSS class names.
 * Handles aliases (e.g., 'granted' and 'confirmed' use same style).
 */
function getVariantClass(v: BadgeVariant): string {
  const variantMap: Record<BadgeVariant, string> = {
    "pre-wedding": "badge-prewedding",
    "ceremony": "badge-ceremony",
    "reception": "badge-reception",
    "post-wedding": "badge-postwedding",
    "granted": "badge-success",
    "confirmed": "badge-success",
    "considering": "badge-warning",
    "pending": "badge-warning",
    "tbc": "badge-muted",
    "info": "badge-info",
    "default": "badge-default",
  };
  return variantMap[v] || "badge-default";
}
---

<span
  class:list={[
    "badge",
    getVariantClass(variant),
    `badge-${size}`,
    className,
  ]}
>
  <slot />
</span>

<style>
  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: var(--font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.03em;
    white-space: nowrap;
    border-radius: var(--radius-button);
  }

  /* Size variants */
  .badge-sm {
    padding: 2px 8px;
    font-size: var(--font-size-xs);
  }

  .badge-md {
    padding: 4px 12px;
    font-size: var(--font-size-sm);
  }

  /* Event Type Variants */
  .badge-prewedding {
    background-color: var(--color-orange-100);
    color: var(--color-orange-800);
  }

  .badge-ceremony {
    background-color: var(--color-gold-100);
    color: var(--color-gold-800);
  }

  .badge-reception {
    background-color: var(--color-earth-100);
    color: var(--color-earth-700);
  }

  .badge-postwedding {
    background-color: var(--color-earth-200);
    color: var(--color-earth-600);
  }

  /* Status Variants */
  .badge-success {
    background-color: var(--color-success-light);
    color: var(--color-success);
  }

  .badge-warning {
    background-color: var(--color-warning-light);
    color: var(--color-orange-800);
  }

  .badge-muted {
    background-color: var(--color-earth-100);
    color: var(--color-earth-600);
  }

  .badge-info {
    background-color: var(--color-info-light);
    color: #0369a1;
  }

  .badge-default {
    background-color: var(--color-cream-200);
    color: var(--color-earth-700);
  }
</style>
