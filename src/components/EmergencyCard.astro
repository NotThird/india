---
/**
 * EmergencyCard Component
 * Quick access to emergency numbers and important contacts
 */
import emergencyData from "../data/emergency.json";
---

<div class="emergency-card">
  <h3 class="emergency-title">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
    </svg>
    Emergency
  </h3>

  <div class="emergency-numbers">
    <a href="tel:100" class="emergency-item emergency-critical">
      <span class="emergency-label">Police</span>
      <span class="emergency-number">100</span>
    </a>
    <a href="tel:108" class="emergency-item emergency-critical">
      <span class="emergency-label">Ambulance</span>
      <span class="emergency-number">108</span>
    </a>
  </div>

  <div class="emergency-section">
    <h4>U.S. Consulate</h4>
    <a href={`tel:${emergencyData.embassy.phone}`} class="emergency-item">
      <span class="emergency-label">Chennai</span>
      <span class="emergency-number">{emergencyData.embassy.phone}</span>
    </a>
  </div>

  <div class="emergency-section">
    <h4>Hospital (24/7)</h4>
    <a href={`tel:${emergencyData.hospitals[0].phone}`} class="emergency-item">
      <span class="emergency-label">{emergencyData.hospitals[0].name}</span>
      <span class="emergency-number">{emergencyData.hospitals[0].phone}</span>
    </a>
  </div>

  <div class="emergency-section">
    <h4>Confirmation Codes</h4>
    <div class="confirmation-item">
      <span class="confirmation-label">Flights (Emirates)</span>
      <button class="copy-btn" data-copy={emergencyData.confirmations.flights}>
        <span class="confirmation-code">{emergencyData.confirmations.flights}</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', async () => {
      const text = btn.getAttribute('data-copy');
      if (text) {
        await navigator.clipboard.writeText(text);
        btn.classList.add('copied');
        setTimeout(() => btn.classList.remove('copied'), 1500);
      }
    });
  });
</script>

<style>
  .emergency-card {
    background: white;
    border-radius: var(--radius-card);
    padding: var(--spacing-4);
    box-shadow: var(--shadow-card);
    border-left: 4px solid var(--color-red-500);
  }

  .emergency-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-lg);
    color: var(--color-red-600);
    margin: 0 0 var(--spacing-3) 0;
  }

  .emergency-numbers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2);
    margin-bottom: var(--spacing-3);
  }

  .emergency-item {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-2);
    border-radius: var(--radius-button);
    text-decoration: none;
    transition: background-color 0.2s;
  }

  .emergency-item:hover {
    background-color: var(--color-earth-50);
  }

  .emergency-critical {
    background-color: var(--color-red-50);
    text-align: center;
  }

  .emergency-critical:hover {
    background-color: var(--color-red-100);
  }

  .emergency-label {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  .emergency-number {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: var(--color-earth-900);
  }

  .emergency-critical .emergency-number {
    color: var(--color-red-600);
    font-size: var(--font-size-xl);
  }

  .emergency-section {
    margin-top: var(--spacing-3);
    padding-top: var(--spacing-3);
    border-top: 1px solid var(--color-earth-100);
  }

  .emergency-section h4 {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 var(--spacing-2) 0;
  }

  .confirmation-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .confirmation-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  .copy-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
    padding: var(--spacing-1) var(--spacing-2);
    background: var(--color-earth-100);
    border: none;
    border-radius: var(--radius-button);
    cursor: pointer;
    transition: all 0.2s;
  }

  .copy-btn:hover {
    background: var(--color-earth-200);
  }

  .copy-btn.copied {
    background: var(--color-green-100);
    color: var(--color-green-700);
  }

  .confirmation-code {
    font-family: monospace;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-bold);
    color: var(--color-earth-800);
  }

  @media (max-width: 600px) {
    .emergency-card {
      padding: var(--spacing-3);
    }

    .emergency-numbers {
      gap: var(--spacing-1);
    }

    .emergency-number {
      font-size: var(--font-size-base);
    }

    .emergency-critical .emergency-number {
      font-size: var(--font-size-lg);
    }
  }
</style>
