---
/**
 * RoutePanel.astro
 *
 * Purpose: Display route selection and transport options panel for the interactive map.
 *
 * Features:
 * - Route toggle controls to show/hide specific routes on the map
 * - Transport option display with times, costs, and recommendations
 * - Visual indicators for recommended transport modes
 * - Compact and expanded view modes
 * - Mobile-responsive design
 *
 * Props:
 * - routes: RouteSegment[] - Array of route segments to display
 *
 * Dependencies:
 * - RouteSegment and TransportOption types from data.ts
 */

import type { RouteSegment, TransportOption, TransportMode } from "../types/data";

interface Props {
  routes: RouteSegment[];
}

const { routes } = Astro.props;

// Serialize routes for client-side script
const routesJson = JSON.stringify(routes);

// Transport mode icons and colors
const transportConfig: Record<TransportMode, { icon: string; color: string; label: string }> = {
  taxi: {
    icon: "car",
    color: "#3B82F6",
    label: "Taxi / Uber / Ola"
  },
  "auto-rickshaw": {
    icon: "auto",
    color: "#22C55E",
    label: "Auto-rickshaw"
  },
  walking: {
    icon: "walk",
    color: "#6B7280",
    label: "Walking"
  }
};
---

<div class="route-panel" id="route-panel">
  <div class="panel-header">
    <h3 class="panel-title">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M3 3v18h18"></path>
        <path d="m19 9-5 5-4-4-3 3"></path>
      </svg>
      <span>Routes</span>
    </h3>
    <button
      class="panel-toggle"
      id="panel-toggle"
      aria-label="Toggle route panel"
      title="Toggle panel"
    >
      <svg
        class="toggle-icon collapse-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <polyline points="18 15 12 9 6 15"></polyline>
      </svg>
      <svg
        class="toggle-icon expand-icon hidden"
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </button>
  </div>

  <div class="panel-content" id="panel-content">
    <!-- Transport Mode Selector -->
    <div class="mode-selector">
      <span class="mode-label-text">Show routes for:</span>
      <div class="mode-buttons">
        <button class="mode-btn active" data-mode="driving" title="Taxi / Auto-rickshaw routes">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.6-1.2-.9-2-.9H5c-.8 0-1.5.4-2 1l-3 3v6c0 .6.4 1 1 1h2"></path>
            <circle cx="7" cy="17" r="2"></circle>
            <circle cx="17" cy="17" r="2"></circle>
          </svg>
          Drive
        </button>
        <button class="mode-btn" data-mode="walking" title="Walking routes">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="5" r="1"></circle>
            <path d="m9 20 3-6 3 6"></path>
            <path d="m6 8 6 2 6-2"></path>
            <path d="M12 10v4"></path>
          </svg>
          Walk
        </button>
      </div>
    </div>

    <!-- Route Selection List -->
    <div class="route-list">
      {routes.map((route, index) => (
        <div class="route-item" data-route-id={route.id}>
          <label class="route-toggle">
            <input
              type="checkbox"
              class="route-checkbox"
              data-route-id={route.id}
              checked={index < 3}
            />
            <span class="route-checkbox-custom"></span>
            <div class="route-info">
              <span class="route-name">{route.endName}</span>
              <span class="route-distance">{route.distanceDisplay}</span>
            </div>
          </label>
          <button
            class="route-details-toggle"
            data-route-id={route.id}
            aria-label={`Show transport options for ${route.endName}`}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
          </button>
        </div>
      ))}
    </div>

    <!-- Selected Route Details -->
    <div class="route-details" id="route-details">
      <div class="details-placeholder">
        <p>Click the info icon next to a route to see transport options</p>
      </div>

      {routes.map((route) => (
        <div class="details-content hidden" data-route-details={route.id}>
          <div class="details-header">
            <h4 class="details-title">
              <span class="from-label">From:</span> {route.startName}
              <span class="arrow-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </span>
              <span class="to-label">To:</span> {route.endName}
            </h4>
            <span class="details-distance">{route.distanceDisplay}</span>
          </div>

          <div class="transport-options">
            {route.transportOptions.map((option) => (
              <div
                class={`transport-option ${option.isRecommended ? "recommended" : ""}`}
              >
                <div class="option-header">
                  <div class="option-mode">
                    {option.mode === "taxi" && (
                      <svg
                        class="mode-icon"
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.6-1.2-.9-2-.9H5c-.8 0-1.5.4-2 1l-3 3v6c0 .6.4 1 1 1h2"></path>
                        <circle cx="7" cy="17" r="2"></circle>
                        <path d="M9 17h6"></path>
                        <circle cx="17" cy="17" r="2"></circle>
                      </svg>
                    )}
                    {option.mode === "auto-rickshaw" && (
                      <svg
                        class="mode-icon"
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path d="M8 6v6"></path>
                        <path d="M15 6v6"></path>
                        <path d="M2 12h19.6"></path>
                        <path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"></path>
                        <circle cx="7" cy="18" r="2"></circle>
                        <path d="M9 18h5"></path>
                        <circle cx="16" cy="18" r="2"></circle>
                      </svg>
                    )}
                    {option.mode === "walking" && (
                      <svg
                        class="mode-icon"
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <circle cx="12" cy="5" r="1"></circle>
                        <path d="m9 20 3-6 3 6"></path>
                        <path d="m6 8 6 2 6-2"></path>
                        <path d="M12 10v4"></path>
                      </svg>
                    )}
                    <span class="mode-label">
                      {option.mode === "taxi" && "Taxi / Uber / Ola"}
                      {option.mode === "auto-rickshaw" && "Auto-rickshaw"}
                      {option.mode === "walking" && "Walking"}
                    </span>
                  </div>
                  {option.isRecommended && (
                    <span class="recommended-badge">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="20 6 9 17 4 12"></polyline>
                      </svg>
                      Recommended
                    </span>
                  )}
                </div>
                <div class="option-details">
                  <div class="option-stat">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="14"
                      height="14"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>{option.durationDisplay}</span>
                  </div>
                  <div class="option-stat">
                    <span class="rupee-icon">Rs.</span>
                    <span>{option.costDisplay}</span>
                  </div>
                </div>
                {option.notes && (
                  <p class="option-notes">{option.notes}</p>
                )}
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>

    <!-- Quick Actions -->
    <div class="panel-actions">
      <button class="action-btn" id="show-all-routes">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        Show All
      </button>
      <button class="action-btn" id="hide-all-routes">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
          <line x1="1" y1="1" x2="23" y2="23"></line>
        </svg>
        Hide All
      </button>
    </div>
  </div>
</div>

<script define:vars={{ routesJson }}>
  /**
   * Route Panel Interactivity
   * Handles panel toggle, route visibility, transport mode, and details display
   */
  function initRoutePanel() {
    const panel = document.getElementById("route-panel");
    const panelToggle = document.getElementById("panel-toggle");
    const panelContent = document.getElementById("panel-content");
    const collapseIcon = panel?.querySelector(".collapse-icon");
    const expandIcon = panel?.querySelector(".expand-icon");

    if (!panel || !panelToggle || !panelContent) return;

    // Current transport mode state
    let currentMode = "driving";

    // Panel collapse/expand
    let isCollapsed = false;
    panelToggle.addEventListener("click", () => {
      isCollapsed = !isCollapsed;
      panelContent.classList.toggle("collapsed", isCollapsed);
      collapseIcon?.classList.toggle("hidden", isCollapsed);
      expandIcon?.classList.toggle("hidden", !isCollapsed);
    });

    // Transport mode switching
    const modeButtons = panel.querySelectorAll(".mode-btn");
    modeButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const newMode = btn.getAttribute("data-mode");
        if (newMode === currentMode) return;

        // Update button states
        modeButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        currentMode = newMode;

        // Dispatch mode change event to update all visible routes
        window.dispatchEvent(
          new CustomEvent("routeModeChange", {
            detail: { mode: currentMode },
          })
        );

        // Re-dispatch visibility for checked routes with new mode
        const checkboxes = panel.querySelectorAll(".route-checkbox");
        checkboxes.forEach((checkbox) => {
          const routeId = checkbox.getAttribute("data-route-id");
          window.dispatchEvent(
            new CustomEvent("routeToggle", {
              detail: { routeId, visible: checkbox.checked, mode: currentMode },
            })
          );
        });
      });
    });

    // Route details toggle
    const detailsToggles = panel.querySelectorAll(".route-details-toggle");
    const detailsPlaceholder = panel.querySelector(".details-placeholder");
    const allDetailsContent = panel.querySelectorAll(".details-content");

    detailsToggles.forEach((toggle) => {
      toggle.addEventListener("click", () => {
        const routeId = toggle.getAttribute("data-route-id");
        const detailsContent = panel.querySelector(`[data-route-details="${routeId}"]`);

        // Hide placeholder
        if (detailsPlaceholder) {
          detailsPlaceholder.classList.add("hidden");
        }

        // Hide all other details
        allDetailsContent.forEach((content) => {
          if (content !== detailsContent) {
            content.classList.add("hidden");
          }
        });

        // Toggle selected details
        if (detailsContent) {
          detailsContent.classList.toggle("hidden");

          // Show placeholder if no details visible
          const anyVisible = Array.from(allDetailsContent).some(
            (c) => !c.classList.contains("hidden")
          );
          if (!anyVisible && detailsPlaceholder) {
            detailsPlaceholder.classList.remove("hidden");
          }
        }
      });
    });

    // Route checkbox changes - dispatch custom event for map integration
    const checkboxes = panel.querySelectorAll(".route-checkbox");
    checkboxes.forEach((checkbox) => {
      checkbox.addEventListener("change", (e) => {
        const routeId = checkbox.getAttribute("data-route-id");
        const isChecked = checkbox.checked;

        // Dispatch custom event for map to handle (include current mode)
        window.dispatchEvent(
          new CustomEvent("routeToggle", {
            detail: { routeId, visible: isChecked, mode: currentMode },
          })
        );
      });
    });

    // Show/Hide All buttons
    const showAllBtn = document.getElementById("show-all-routes");
    const hideAllBtn = document.getElementById("hide-all-routes");

    showAllBtn?.addEventListener("click", () => {
      checkboxes.forEach((cb) => {
        cb.checked = true;
        const routeId = cb.getAttribute("data-route-id");
        window.dispatchEvent(
          new CustomEvent("routeToggle", {
            detail: { routeId, visible: true, mode: currentMode },
          })
        );
      });
    });

    hideAllBtn?.addEventListener("click", () => {
      checkboxes.forEach((cb) => {
        cb.checked = false;
        const routeId = cb.getAttribute("data-route-id");
        window.dispatchEvent(
          new CustomEvent("routeToggle", {
            detail: { routeId, visible: false, mode: currentMode },
          })
        );
      });
    });

    // Initialize routes - dispatch initial state
    setTimeout(() => {
      checkboxes.forEach((checkbox) => {
        if (checkbox.checked) {
          const routeId = checkbox.getAttribute("data-route-id");
          window.dispatchEvent(
            new CustomEvent("routeToggle", {
              detail: { routeId, visible: true, mode: currentMode },
            })
          );
        }
      });
    }, 500);
  }

  // Initialize when DOM is ready
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initRoutePanel);
  } else {
    setTimeout(initRoutePanel, 200);
  }

  // Re-initialize on Astro page transitions
  document.addEventListener("astro:page-load", () => {
    setTimeout(initRoutePanel, 200);
  });
</script>

<style>
  .route-panel {
    background-color: var(--color-bg-card);
    border-radius: var(--radius-card);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-card);
    overflow: hidden;
  }

  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-4);
    background-color: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-border);
  }

  .panel-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-earth-900);
    margin: 0;
  }

  .panel-title svg {
    color: var(--color-gold-600);
  }

  .panel-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-1);
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-text-secondary);
    border-radius: var(--radius-button);
    transition: all 0.2s ease;
  }

  .panel-toggle:hover {
    background-color: var(--color-bg-tertiary);
    color: var(--color-earth-900);
  }

  .toggle-icon.hidden {
    display: none;
  }

  .panel-content {
    max-height: 600px;
    overflow-y: auto;
    transition: max-height 0.3s ease;
  }

  .panel-content.collapsed {
    max-height: 0;
    overflow: hidden;
  }

  /* Mode Selector */
  .mode-selector {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-3);
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border);
    background-color: var(--color-bg-tertiary);
  }

  .mode-label-text {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
  }

  .mode-buttons {
    display: flex;
    gap: var(--spacing-1);
    background-color: var(--color-bg-card);
    border-radius: var(--radius-button);
    padding: 2px;
    border: 1px solid var(--color-border);
  }

  .mode-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
    padding: var(--spacing-2) var(--spacing-3);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    background: transparent;
    border: none;
    border-radius: calc(var(--radius-button) - 2px);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .mode-btn:hover {
    color: var(--color-earth-900);
    background-color: var(--color-bg-secondary);
  }

  .mode-btn.active {
    color: white;
    background-color: var(--color-gold-600);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .mode-btn.active svg {
    color: white;
  }

  .mode-btn svg {
    color: var(--color-gold-600);
  }

  /* Route List */
  .route-list {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border);
  }

  .route-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-2) 0;
    border-bottom: 1px solid var(--color-border-light);
  }

  .route-item:last-child {
    border-bottom: none;
  }

  .route-toggle {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    cursor: pointer;
    flex: 1;
  }

  .route-checkbox {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }

  .route-checkbox-custom {
    width: 18px;
    height: 18px;
    border: 2px solid var(--color-border);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .route-checkbox:checked + .route-checkbox-custom {
    background-color: var(--color-gold-500);
    border-color: var(--color-gold-500);
  }

  .route-checkbox:checked + .route-checkbox-custom::after {
    content: "";
    width: 6px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    margin-bottom: 2px;
  }

  .route-checkbox:focus + .route-checkbox-custom {
    box-shadow: 0 0 0 2px var(--color-gold-200);
  }

  .route-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .route-name {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-earth-900);
  }

  .route-distance {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
  }

  .route-details-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-1);
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-text-muted);
    border-radius: var(--radius-button);
    transition: all 0.2s ease;
  }

  .route-details-toggle:hover {
    background-color: var(--color-gold-100);
    color: var(--color-gold-700);
  }

  /* Route Details */
  .route-details {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border);
    background-color: var(--color-bg-secondary);
  }

  .details-placeholder {
    text-align: center;
    padding: var(--spacing-4);
    color: var(--color-text-muted);
    font-size: var(--font-size-sm);
  }

  .details-placeholder.hidden,
  .details-content.hidden {
    display: none;
  }

  .details-header {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-1);
    margin-bottom: var(--spacing-3);
    padding-bottom: var(--spacing-3);
    border-bottom: 1px solid var(--color-border-light);
  }

  .details-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-normal);
    color: var(--color-earth-800);
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--spacing-1);
  }

  .from-label,
  .to-label {
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-muted);
    font-size: var(--font-size-xs);
    text-transform: uppercase;
  }

  .arrow-icon {
    display: inline-flex;
    color: var(--color-gold-600);
    margin: 0 var(--spacing-1);
  }

  .details-distance {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
  }

  /* Transport Options */
  .transport-options {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
  }

  .transport-option {
    background-color: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-card);
    padding: var(--spacing-3);
    transition: all 0.2s ease;
  }

  .transport-option.recommended {
    border-color: var(--color-gold-400);
    background-color: var(--color-gold-50);
  }

  .option-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-2);
  }

  .option-mode {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
  }

  .mode-icon {
    color: var(--color-gold-600);
  }

  .mode-label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-earth-900);
  }

  .recommended-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-gold-700);
    background-color: var(--color-gold-200);
    padding: 2px var(--spacing-2);
    border-radius: var(--radius-badge);
  }

  .option-details {
    display: flex;
    gap: var(--spacing-4);
    margin-bottom: var(--spacing-2);
  }

  .option-stat {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  .option-stat svg {
    color: var(--color-gold-600);
  }

  .rupee-icon {
    font-weight: var(--font-weight-medium);
    color: var(--color-gold-600);
    font-size: var(--font-size-xs);
  }

  .option-notes {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    font-style: italic;
    margin: 0;
    padding-top: var(--spacing-2);
    border-top: 1px dashed var(--color-border-light);
  }

  /* Panel Actions */
  .panel-actions {
    display: flex;
    gap: var(--spacing-2);
    padding: var(--spacing-3);
    background-color: var(--color-bg-secondary);
  }

  .action-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
    padding: var(--spacing-2) var(--spacing-3);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    background-color: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-button);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .action-btn:hover {
    background-color: var(--color-gold-100);
    border-color: var(--color-gold-300);
    color: var(--color-gold-700);
  }

  /* Responsive Design */
  @media (max-width: 767px) {
    .route-panel {
      margin: 0 calc(-1 * var(--spacing-4));
      border-radius: 0;
      border-left: none;
      border-right: none;
    }

    .panel-content {
      max-height: 400px;
    }

    .option-details {
      flex-direction: column;
      gap: var(--spacing-1);
    }
  }
</style>
